package org.apache.jsp.users.medico;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import java.sql.Date;
import java.sql.Timestamp;
import modelo.citaMedica;
import java.util.List;

public final class atencion_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();

  private static java.util.List<String> _jspx_dependants;

  private org.glassfish.jsp.api.ResourceInjector _jspx_resourceInjector;

  public java.util.List<String> getDependants() {
    return _jspx_dependants;
  }

  public void _jspService(HttpServletRequest request, HttpServletResponse response)
        throws java.io.IOException, ServletException {

    PageContext pageContext = null;
    HttpSession session = null;
    ServletContext application = null;
    ServletConfig config = null;
    JspWriter out = null;
    Object page = this;
    JspWriter _jspx_out = null;
    PageContext _jspx_page_context = null;

    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;
      _jspx_resourceInjector = (org.glassfish.jsp.api.ResourceInjector) application.getAttribute("com.sun.appserv.jsp.resource.injector");

      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("<!DOCTYPE html>\n");
      out.write("<html>\n");
      out.write("    <head>\n");
      out.write("        <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n");
      out.write("        <title>Atención de Cita Médica</title>\n");
      out.write("        <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\">\n");
      out.write("        <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css\">\n");
      out.write("        <style>\n");
      out.write("            :root {\n");
      out.write("                --primary: #1a7cc9;\n");
      out.write("                --primary-dark: #1565a3;\n");
      out.write("                --primary-light: #e1f0fa;\n");
      out.write("                --secondary: #2c3e50;\n");
      out.write("                --accent: #2ecc71;\n");
      out.write("                --accent-dark: #27ae60;\n");
      out.write("                --danger: #e74c3c;\n");
      out.write("                --warning: #f39c12;\n");
      out.write("                --gray-100: #f8f9fa;\n");
      out.write("                --gray-200: #e9ecef;\n");
      out.write("                --gray-300: #dee2e6;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            body {\n");
      out.write("                background-color: #f5f9fc;\n");
      out.write("                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n");
      out.write("                padding: 20px;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            .card {\n");
      out.write("                border-radius: 12px;\n");
      out.write("                box-shadow: 0 4px 6px rgba(0,0,0,0.07);\n");
      out.write("                margin-bottom: 20px;\n");
      out.write("                border: none;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            .card-header {\n");
      out.write("                background-color: var(--primary);\n");
      out.write("                color: white;\n");
      out.write("                border-radius: 12px 12px 0 0 !important;\n");
      out.write("                font-weight: 600;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            .btn-primary {\n");
      out.write("                background-color: var(--primary);\n");
      out.write("                border: none;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            .btn-primary:hover {\n");
      out.write("                background-color: var(--primary-dark);\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            .btn-success {\n");
      out.write("                background-color: var(--accent);\n");
      out.write("                border: none;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            .btn-success:hover {\n");
      out.write("                background-color: var(--accent-dark);\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            .cita-info {\n");
      out.write("                background-color: var(--gray-100);\n");
      out.write("                border-radius: 8px;\n");
      out.write("                padding: 15px;\n");
      out.write("                margin-bottom: 15px;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            .medicamento-row {\n");
      out.write("                margin-bottom: 15px;\n");
      out.write("                padding: 15px;\n");
      out.write("                border: 1px solid var(--gray-300);\n");
      out.write("                border-radius: 8px;\n");
      out.write("                background-color: var(--gray-100);\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            .btn-remove {\n");
      out.write("                color: var(--danger);\n");
      out.write("                background: none;\n");
      out.write("                border: none;\n");
      out.write("                font-size: 1.2rem;\n");
      out.write("            }\n");
      out.write("            \n");
      out.write("            .section-title {\n");
      out.write("                color: var(--primary);\n");
      out.write("                border-bottom: 2px solid var(--primary-light);\n");
      out.write("                padding-bottom: 10px;\n");
      out.write("                margin-bottom: 20px;\n");
      out.write("            }\n");
      out.write("        </style>\n");
      out.write("    </head>\n");
      out.write("    <body>\n");
      out.write("        <div class=\"container\">\n");
      out.write("            ");

                List<citaMedica> lista = (List<citaMedica>) request.getAttribute("listasCitasAtencion");
                citaMedica c = lista.get(0);
                int id = c.getId();
                int idMedico = c.getIdMedico();
                int idPaciente = c.getIdPaciente();
                int idEnlace = c.getIdEnlace();
                Date horaInicio = c.getHoraInicio();
                Date horaFin = c.getHoraFin();
                String estado = c.getEstado();
                Date fechaRegistro = c.getFechaRegistro();
                double precio = c.getPrecio();
                String enlace = c.getEnlace();
                String medico = c.getNombreMedico();
                String paciente = c.getNombrePaciente();
                String especialidad = c.getNombreEspecialidad();
            
      out.write("\n");
      out.write("            \n");
      out.write("            <div class=\"row mb-4\">\n");
      out.write("                <div class=\"col\">\n");
      out.write("                    <h1 class=\"text-center\"><i class=\"bi bi-heart-pulse\"></i> Atención de Cita Médica</h1>\n");
      out.write("                </div>\n");
      out.write("            </div>\n");
      out.write("            \n");
      out.write("            <form action=\"ProcesarAtencionCita\" method=\"post\">\n");
      out.write("                <input type=\"hidden\" name=\"idCita\" value=\"");
      out.print( id );
      out.write("\">\n");
      out.write("                <input type=\"hidden\" name=\"idMedico\" value=\"");
      out.print( idMedico );
      out.write("\">\n");
      out.write("                <input type=\"hidden\" name=\"idPaciente\" value=\"");
      out.print( idPaciente );
      out.write("\">\n");
      out.write("                \n");
      out.write("                <div class=\"row\">\n");
      out.write("                    <div class=\"col-md-6\">\n");
      out.write("                        <div class=\"card\">\n");
      out.write("                            <div class=\"card-header\">\n");
      out.write("                                <i class=\"bi bi-info-circle\"></i> Información de la Cita\n");
      out.write("                            </div>\n");
      out.write("                            <div class=\"card-body\">\n");
      out.write("                                <div class=\"row\">\n");
      out.write("                                    <div class=\"col-md-6\">\n");
      out.write("                                        <div class=\"cita-info\">\n");
      out.write("                                            <h6><i class=\"bi bi-person\"></i> Paciente</h6>\n");
      out.write("                                            <p class=\"fw-bold\">");
      out.print( paciente );
      out.write("</p>\n");
      out.write("                                        </div>\n");
      out.write("                                    </div>\n");
      out.write("                                    <div class=\"col-md-6\">\n");
      out.write("                                        <div class=\"cita-info\">\n");
      out.write("                                            <h6><i class=\"bi bi-person-badge\"></i> Médico</h6>\n");
      out.write("                                            <p class=\"fw-bold\">");
      out.print( medico );
      out.write("</p>\n");
      out.write("                                        </div>\n");
      out.write("                                    </div>\n");
      out.write("                                </div>\n");
      out.write("                                \n");
      out.write("                                <div class=\"row\">\n");
      out.write("                                    <div class=\"col-md-6\">\n");
      out.write("                                        <div class=\"cita-info\">\n");
      out.write("                                            <h6><i class=\"bi bi-calendar\"></i> Fecha y Hora</h6>\n");
      out.write("                                            <p class=\"fw-bold\">");
      out.print( horaInicio );
      out.write(" - ");
      out.print( horaFin );
      out.write("</p>\n");
      out.write("                                        </div>\n");
      out.write("                                    </div>\n");
      out.write("                                    <div class=\"col-md-6\">\n");
      out.write("                                        <div class=\"cita-info\">\n");
      out.write("                                            <h6><i class=\"bi bi-bookmark\"></i> Especialidad</h6>\n");
      out.write("                                            <p class=\"fw-bold\">");
      out.print( especialidad );
      out.write("</p>\n");
      out.write("                                        </div>\n");
      out.write("                                    </div>\n");
      out.write("                                </div>\n");
      out.write("                                \n");
      out.write("                                <div class=\"cita-info\">\n");
      out.write("                                    <h6><i class=\"bi bi-link\"></i> Enlace de la Consulta</h6>\n");
      out.write("                                    <p class=\"fw-bold\"><a href=\"");
      out.print( enlace );
      out.write("\" target=\"_blank\">");
      out.print( enlace );
      out.write("</a></p>\n");
      out.write("                                </div>\n");
      out.write("                                \n");
      out.write("                                <div class=\"mb-3\">\n");
      out.write("                                    <label for=\"estado\" class=\"form-label\">Estado de la Cita</label>\n");
      out.write("                                    <select class=\"form-select\" id=\"estado\" name=\"estado\" required>\n");
      out.write("                                        <option value=\"Proceso\" ");
      out.print( "Proceso".equals(estado) ? "selected" : "" );
      out.write(">En Proceso</option>\n");
      out.write("                                        <option value=\"Completada\" ");
      out.print( "Completada".equals(estado) ? "selected" : "" );
      out.write(">Completada</option>\n");
      out.write("                                    </select>\n");
      out.write("                                </div>\n");
      out.write("                            </div>\n");
      out.write("                        </div>\n");
      out.write("                    </div>\n");
      out.write("                    \n");
      out.write("                    <div class=\"col-md-6\">\n");
      out.write("                        <div class=\"card\">\n");
      out.write("                            <div class=\"card-header\">\n");
      out.write("                                <i class=\"bi bi-clipboard-plus\"></i> Diagnóstico\n");
      out.write("                            </div>\n");
      out.write("                            <div class=\"card-body\">\n");
      out.write("                                <div class=\"mb-3\">\n");
      out.write("                                    <label for=\"sintomas\" class=\"form-label\">Síntomas</label>\n");
      out.write("                                    <textarea class=\"form-control\" id=\"sintomas\" name=\"sintomas\" rows=\"3\" placeholder=\"Describa los síntomas presentados por el paciente\"></textarea>\n");
      out.write("                                </div>\n");
      out.write("                                \n");
      out.write("                                <div class=\"mb-3\">\n");
      out.write("                                    <label for=\"diagnostico\" class=\"form-label\">Diagnóstico</label>\n");
      out.write("                                    <textarea class=\"form-control\" id=\"diagnostico\" name=\"diagnostico\" rows=\"3\" placeholder=\"Ingrese el diagnóstico\" required></textarea>\n");
      out.write("                                </div>\n");
      out.write("                                \n");
      out.write("                                <div class=\"mb-3\">\n");
      out.write("                                    <label for=\"observaciones\" class=\"form-label\">Observaciones</label>\n");
      out.write("                                    <textarea class=\"form-control\" id=\"observaciones\" name=\"observaciones\" rows=\"2\" placeholder=\"Observaciones adicionales\"></textarea>\n");
      out.write("                                </div>\n");
      out.write("                            </div>\n");
      out.write("                        </div>\n");
      out.write("                    </div>\n");
      out.write("                </div>\n");
      out.write("                \n");
      out.write("                <div class=\"card mt-4\">\n");
      out.write("                    <div class=\"card-header d-flex justify-content-between align-items-center\">\n");
      out.write("                        <span><i class=\"bi bi-capsule\"></i> Receta Médica</span>\n");
      out.write("                        <button type=\"button\" class=\"btn btn-sm btn-primary\" id=\"btnAddMedicamento\">\n");
      out.write("                            <i class=\"bi bi-plus-circle\"></i> Agregar Medicamento\n");
      out.write("                        </button>\n");
      out.write("                    </div>\n");
      out.write("                    <div class=\"card-body\">\n");
      out.write("                        <div id=\"medicamentos-container\">\n");
      out.write("                            <div class=\"medicamento-row\">\n");
      out.write("                                <div class=\"row\">\n");
      out.write("                                    <div class=\"col-md-5\">\n");
      out.write("                                        <div class=\"mb-3\">\n");
      out.write("                                            <label class=\"form-label\">Medicamento</label>\n");
      out.write("                                            <input type=\"text\" class=\"form-control\" name=\"medicamento[]\" placeholder=\"Nombre del medicamento\" required>\n");
      out.write("                                        </div>\n");
      out.write("                                    </div>\n");
      out.write("                                    <div class=\"col-md-3\">\n");
      out.write("                                        <div class=\"mb-3\">\n");
      out.write("                                            <label class=\"form-label\">Dosis</label>\n");
      out.write("                                            <input type=\"text\" class=\"form-control\" name=\"dosis[]\" placeholder=\"Ej: 500mg\" required>\n");
      out.write("                                        </div>\n");
      out.write("                                    </div>\n");
      out.write("                                    <div class=\"col-md-3\">\n");
      out.write("                                        <div class=\"mb-3\">\n");
      out.write("                                            <label class=\"form-label\">Frecuencia</label>\n");
      out.write("                                            <input type=\"text\" class=\"form-control\" name=\"frecuencia[]\" placeholder=\"Ej: Cada 8 horas\" required>\n");
      out.write("                                        </div>\n");
      out.write("                                    </div>\n");
      out.write("                                    <div class=\"col-md-1\">\n");
      out.write("                                        <div class=\"mb-3\">\n");
      out.write("                                            <label class=\"form-label\">&nbsp;</label>\n");
      out.write("                                            <button type=\"button\" class=\"btn btn-remove\" disabled>\n");
      out.write("                                                <i class=\"bi bi-x-circle\"></i>\n");
      out.write("                                            </button>\n");
      out.write("                                        </div>\n");
      out.write("                                    </div>\n");
      out.write("                                </div>\n");
      out.write("                            </div>\n");
      out.write("                        </div>\n");
      out.write("                    </div>\n");
      out.write("                </div>\n");
      out.write("                \n");
      out.write("                <div class=\"row mt-4\">\n");
      out.write("                    <div class=\"col text-center\">\n");
      out.write("                        <button type=\"submit\" class=\"btn btn-success btn-lg\">\n");
      out.write("                            <i class=\"bi bi-check-circle\"></i> Guardar Atención\n");
      out.write("                        </button>\n");
      out.write("                        <a href=\"javascript:history.back()\" class=\"btn btn-secondary btn-lg ms-2\">\n");
      out.write("                            <i class=\"bi bi-arrow-left\"></i> Volver\n");
      out.write("                        </a>\n");
      out.write("                    </div>\n");
      out.write("                </div>\n");
      out.write("            </form>\n");
      out.write("        </div>\n");
      out.write("        \n");
      out.write("        <script>\n");
      out.write("            document.addEventListener('DOMContentLoaded', function() {\n");
      out.write("                // Contador para IDs únicos\n");
      out.write("                let medicamentoCount = 1;\n");
      out.write("                \n");
      out.write("                // Función para agregar un nuevo medicamento\n");
      out.write("                document.getElementById('btnAddMedicamento').addEventListener('click', function() {\n");
      out.write("                    const container = document.getElementById('medicamentos-container');\n");
      out.write("                    const newRow = document.createElement('div');\n");
      out.write("                    newRow.className = 'medicamento-row';\n");
      out.write("                    newRow.innerHTML = `\n");
      out.write("                        <div class=\"row\">\n");
      out.write("                            <div class=\"col-md-5\">\n");
      out.write("                                <div class=\"mb-3\">\n");
      out.write("                                    <label class=\"form-label\">Medicamento</label>\n");
      out.write("                                    <input type=\"text\" class=\"form-control\" name=\"medicamento[]\" placeholder=\"Nombre del medicamento\" required>\n");
      out.write("                                </div>\n");
      out.write("                            </div>\n");
      out.write("                            <div class=\"col-md-3\">\n");
      out.write("                                <div class=\"mb-3\">\n");
      out.write("                                    <label class=\"form-label\">Dosis</label>\n");
      out.write("                                    <input type=\"text\" class=\"form-control\" name=\"dosis[]\" placeholder=\"Ej: 500mg\" required>\n");
      out.write("                                </div>\n");
      out.write("                            </div>\n");
      out.write("                            <div class=\"col-md-3\">\n");
      out.write("                                <div class=\"mb-3\">\n");
      out.write("                                    <label class=\"form-label\">Frecuencia</label>\n");
      out.write("                                    <input type=\"text\" class=\"form-control\" name=\"frecuencia[]\" placeholder=\"Ej: Cada 8 horas\" required>\n");
      out.write("                                </div>\n");
      out.write("                            </div>\n");
      out.write("                            <div class=\"col-md-1\">\n");
      out.write("                                <div class=\"mb-3\">\n");
      out.write("                                    <label class=\"form-label\">&nbsp;</label>\n");
      out.write("                                    <button type=\"button\" class=\"btn btn-remove\">\n");
      out.write("                                        <i class=\"bi bi-x-circle\"></i>\n");
      out.write("                                    </button>\n");
      out.write("                                </div>\n");
      out.write("                            </div>\n");
      out.write("                        </div>\n");
      out.write("                    `;\n");
      out.write("                    \n");
      out.write("                    container.appendChild(newRow);\n");
      out.write("                    \n");
      out.write("                    // Agregar evento al botón de eliminar\n");
      out.write("                    const removeBtn = newRow.querySelector('.btn-remove');\n");
      out.write("                    removeBtn.addEventListener('click', function() {\n");
      out.write("                        container.removeChild(newRow);\n");
      out.write("                    });\n");
      out.write("                    \n");
      out.write("                    medicamentoCount++;\n");
      out.write("                });\n");
      out.write("                \n");
      out.write("                // Agregar eventos a los botones de eliminar existentes (excepto el primero)\n");
      out.write("                const removeButtons = document.querySelectorAll('.btn-remove');\n");
      out.write("                removeButtons.forEach(btn => {\n");
      out.write("                    if (!btn.disabled) {\n");
      out.write("                        btn.addEventListener('click', function() {\n");
      out.write("                            const row = this.closest('.medicamento-row');\n");
      out.write("                            row.parentNode.removeChild(row);\n");
      out.write("                        });\n");
      out.write("                    }\n");
      out.write("                });\n");
      out.write("            });\n");
      out.write("        </script>\n");
      out.write("        \n");
      out.write("        <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n");
      out.write("    </body>\n");
      out.write("</html>");
    } catch (Throwable t) {
      if (!(t instanceof SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          out.clearBuffer();
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
